<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Calista Chen">
<meta name="dcterms.date" content="2025-01-17">

<title>Unlocking the Power of Data: An Introduction to Predictive Modeling – Predictive Modeling</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Predictive Modeling</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Unlocking the Power of Data: An Introduction to Predictive Modeling</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">blog</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Calista Chen </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 17, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><img src="1.png" class="img-fluid"></p>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Data science is revolutionizing the way we make decisions, from predicting the weather to recommending the next movie to watch. One of its most fascinating tools is predictive modeling—a method used to forecast future outcomes based on past data. This blog will guide you through the fundamentals of predictive modeling, explain how it works, and showcase its real-world applications, making it accessible even for those new to the topic.</p>
</section>
<section id="what-is-predictive-modeling" class="level2">
<h2 class="anchored" data-anchor-id="what-is-predictive-modeling">What is Predictive Modeling?</h2>
<p>Predictive modeling is the process of using data and statistical algorithms to make predictions about future events. Think of it as a crystal ball powered by data: by analyzing historical trends, we can anticipate what’s likely to happen next.</p>
<section id="real-world-analogy" class="level3">
<h3 class="anchored" data-anchor-id="real-world-analogy">Real-world Analogy</h3>
<p>Imagine a weather forecast. Meteorologists analyze historical weather patterns and current conditions to predict tomorrow’s weather. Predictive modeling in data science works similarly but spans many domains, from healthcare to finance.</p>
</section>
<section id="why-it-matters" class="level3">
<h3 class="anchored" data-anchor-id="why-it-matters">Why It Matters</h3>
<p>Predictive modeling has become a cornerstone in industries such as:</p>
<div class="grid justify-center">
<div class="g-col-4">
<p><img src="healthcare.png" class="img-fluid quarto-figure quarto-figure-center" style="width:100.0%" alt="Healthcare: Predicting patient outcomes."> <strong>Healthcare</strong><br>
Predicting patient outcomes.</p>
</div>
<div class="g-col-4">
<p><img src="finance.jpg" class="img-fluid quarto-figure quarto-figure-center" style="width:100.0%" alt="Finance: Assessing credit risk and detecting fraud."> <strong>Finance</strong><br>
Assessing credit risk and detecting fraud.</p>
</div>
<div class="g-col-4">
<p><img src="e_commerce.jpg" class="img-fluid quarto-figure quarto-figure-center" style="width:100.0%" alt="E-commerce: Recommending products based on user preferences."> <strong>E-commerce</strong><br>
Recommending products based on user preferences.</p>
</div>
</div>
</section>
</section>
<section id="how-does-predictive-modeling-work" class="level2">
<h2 class="anchored" data-anchor-id="how-does-predictive-modeling-work">How Does Predictive Modeling Work?</h2>
<section id="data-collection" class="level3">
<h3 class="anchored" data-anchor-id="data-collection">1. Data Collection</h3>
<p>The process begins with gathering relevant data, which could include structured data (e.g., sales figures) or unstructured data (e.g., text or images).</p>
</section>
<section id="model-building" class="level3">
<h3 class="anchored" data-anchor-id="model-building">2. Model Building</h3>
<section id="data-cleaning-and-preparation" class="level4">
<h4 class="anchored" data-anchor-id="data-cleaning-and-preparation">Data Cleaning and Preparation</h4>
<p>Before building a model, data must be cleaned to remove duplicates, fill missing values, and ensure accuracy.</p>
</section>
<section id="feature-selection" class="level4">
<h4 class="anchored" data-anchor-id="feature-selection">Feature Selection</h4>
<p>Key variables, or features, are identified. For instance, house size, number of rooms, and location might be crucial for predicting house prices.</p>
</section>
<section id="choosing-a-model" class="level4">
<h4 class="anchored" data-anchor-id="choosing-a-model">Choosing a Model</h4>
<p>Popular models include linear regression, decision trees, and neural networks. Each has strengths depending on the problem.</p>
</section>
</section>
<section id="model-evaluation" class="level3">
<h3 class="anchored" data-anchor-id="model-evaluation">3. Model Evaluation</h3>
<p>Models are tested using metrics like:<br>
- <strong>Accuracy</strong>: Percentage of correct predictions.<br>
- <strong>Precision and Recall</strong>: Balancing false positives and negatives.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>When evaluating predictive models, it’s important to use appropriate evaluation metrics (such as accuracy, precision, recall, or AUC) that align with the specific problem and ensure that the model is tested on an independent test set to prevent overfitting. Relying solely on training accuracy or a single metric can lead to misleading conclusions, especially in imbalanced datasets where some metrics (like accuracy) might not reflect true model performance.</p>
</div>
</div>
</section>
</section>
<section id="common-types-of-predictive-models" class="level2">
<h2 class="anchored" data-anchor-id="common-types-of-predictive-models">Common Types of Predictive Models</h2>
<section id="linear-regression" class="level3">
<h3 class="anchored" data-anchor-id="linear-regression">Linear Regression</h3>
<p>A simple model that predicts outcomes based on linear relationships between variables. For example, it might predict house prices based on size alone.</p>
<div class="text-center">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Linear_regression.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>Figure 1. <a href="https://en.wikipedia.org/wiki/Linear_regression">Linear regression</a></figcaption>
</figure>
</div>
</div>
</section>
<section id="decision-trees" class="level3">
<h3 class="anchored" data-anchor-id="decision-trees">Decision Trees</h3>
<p>These models split data into branches based on features, creating an easy-to-interpret “if-then” structure.</p>
<div class="text-center">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="decision_tree.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption>Figure 2. <a href="https://www.kdnuggets.com/2020/01/decision-tree-algorithm-explained.html">Decision tree</a></figcaption>
</figure>
</div>
</div>
</section>
<section id="random-forests-and-ensembles" class="level3">
<h3 class="anchored" data-anchor-id="random-forests-and-ensembles">Random Forests and Ensembles</h3>
<p>By combining multiple decision trees, these models improve accuracy and robustness.</p>
<div class="text-center">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="random_forest.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>Figure 3. <a href="https://medium.com/@roiyeho/random-forests-98892261dc49">Random forest</a></figcaption>
</figure>
</div>
</div>
</section>
<section id="neural-networks" class="level3">
<h3 class="anchored" data-anchor-id="neural-networks">Neural Networks</h3>
<p>Inspired by the human brain, neural networks handle complex problems like image recognition or natural language processing.</p>
<div class="text-center">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="neural_network.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption>Figure 4. <a href="https://towardsdatascience.com/designing-your-neural-networks-a5e4617027ed">Basic Neural Network Structure</a></figcaption>
</figure>
</div>
</div>
</section>
</section>
<section id="real-world-examples-of-predictive-modeling" class="level2">
<h2 class="anchored" data-anchor-id="real-world-examples-of-predictive-modeling">Real-world Examples of Predictive Modeling</h2>
<section id="healthcare" class="level3">
<h3 class="anchored" data-anchor-id="healthcare">Healthcare</h3>
<p>Predictive models help identify patients at risk for certain conditions, enabling earlier interventions.</p>
</section>
<section id="e-commerce" class="level3">
<h3 class="anchored" data-anchor-id="e-commerce">E-commerce</h3>
<p>Retailers use models to recommend products, enhancing customer satisfaction and boosting sales.</p>
</section>
<section id="finance" class="level3">
<h3 class="anchored" data-anchor-id="finance">Finance</h3>
<p>Banks leverage predictive models to detect fraudulent transactions and assess loan risks.</p>
</section>
</section>
<section id="challenges-in-predictive-modeling" class="level2">
<h2 class="anchored" data-anchor-id="challenges-in-predictive-modeling">Challenges in Predictive Modeling</h2>
<section id="data-quality" class="level3">
<h3 class="anchored" data-anchor-id="data-quality">Data Quality</h3>
<p>Poor-quality data leads to unreliable predictions. Ensuring clean and accurate data is critical.</p>
</section>
<section id="bias-in-models" class="level3">
<h3 class="anchored" data-anchor-id="bias-in-models">Bias in Models</h3>
<p>Biased data can result in unfair or inaccurate predictions. Awareness and mitigation strategies are essential.</p>
</section>
<section id="overfitting-vs.-underfitting" class="level3">
<h3 class="anchored" data-anchor-id="overfitting-vs.-underfitting">Overfitting vs.&nbsp;Underfitting</h3>
<ul>
<li><strong>Overfitting</strong>: The model is too tailored to training data and performs poorly on new data.</li>
<li><strong>Underfitting</strong>: The model is too simple to capture meaningful patterns.</li>
</ul>
<div class="grid justify-center">
<div class="g-col-6">
<p><img src="Overfitting.png" class="img-fluid quarto-figure quarto-figure-center" style="width:86.0%"><br>
Figure 5. The green line represents an overfitted model and the black line represents a regularized model. While the green line best follows the training data, it is too dependent on that data and is likely to have a higher error rate on new unseen data, illustrated by black-outlined dots, compared to the black line.</p>
</div>
<div class="g-col-6">
<p><img src="Underfitting.png" class="img-fluid quarto-figure quarto-figure-center" style="width:100.0%"> Figure 6. The blue dashed line represents an underfitted model. A straight line can never fit a parabola. This model is too simple.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>When working with predictive modeling, it’s crucial to balance model complexity and overfitting while ensuring the data is clean, relevant, and representative of the problem at hand.</p>
</div>
</div>
</section>
</section>
<section id="interactive-example-predicting-house-prices" class="level2">
<h2 class="anchored" data-anchor-id="interactive-example-predicting-house-prices">Interactive Example: Predicting House Prices</h2>
<p>Let’s walk through a simplified example: predicting house prices. The dataset is from <a href="https://www.kaggle.com/datasets/muhammadbinimran/housing-price-prediction-data/data">here</a>.</p>
<ol type="1">
<li><strong>Data Cleaning</strong>: Removing incomplete entries from a dataset of house attributes.</li>
</ol>
<div class="grid justify-center">
<div class="g-col-6">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="step1.png" class="img-fluid figure-img" style="width:90.0%"></p>
<figcaption>Figure 7. The result of data cleaning</figcaption>
</figure>
</div>
</div>
<div class="g-col-6">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="step1_2.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>Figure 8. The distribution of price</figcaption>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li><strong>Feature Selection</strong>: We select the following features:</li>
</ol>
<ul>
<li>SquareFeet: The area of the house (in square feet).<br>
</li>
<li>Bedrooms: The number of bedrooms.<br>
</li>
<li>Bathrooms: The number of bathrooms.<br>
</li>
<li>YearBuilt: The year the house was built.<br>
</li>
<li>Neighborhood: Rural, Suburb, Urban (requires encoding).</li>
</ul>
<ol start="3" type="1">
<li><strong>Model Building</strong>: Applying a linear regression model.</li>
</ol>
<div class="text-center">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="step3.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>Figure 9. The characteristic coefficients of the model</figcaption>
</figure>
</div>
</div>
<ol start="4" type="1">
<li><strong>Visualization</strong>: Plotting actual vs.&nbsp;predicted prices to evaluate performance.</li>
</ol>
<div class="text-center">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="step4.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption>Figure 10. Actual vs.&nbsp;Predicted Prices</figcaption>
</figure>
</div>
</div>
</section>
<section id="how-can-predictive-modeling-be-applied-in-the-future" class="level2">
<h2 class="anchored" data-anchor-id="how-can-predictive-modeling-be-applied-in-the-future">How Can Predictive Modeling Be Applied in the Future?</h2>
<section id="ai-and-automation" class="level3">
<h3 class="anchored" data-anchor-id="ai-and-automation">AI and Automation</h3>
<p>Predictive modeling will continue driving advancements in artificial intelligence, enabling smarter automation.</p>
</section>
<section id="ethical-considerations" class="level3">
<h3 class="anchored" data-anchor-id="ethical-considerations">Ethical Considerations</h3>
<p>As models grow more powerful, ethical considerations like fairness and transparency will become increasingly important.</p>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Predictive modeling transforms raw data into actionable insights, empowering stakeholders across industries. While tools like Ridge Regression provide valuable predictions, incorporating richer data and advanced techniques will unlock even greater potential. Whether you’re a data enthusiast or a decision-maker, predictive modeling offers a glimpse into the future—one data point at a time.</p>
<p>So why not dive deeper? Experiment with your own data, explore new techniques, and discover the power of predictive modeling for yourself.</p>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<ol type="1">
<li>Wikipedia contributors. “Overfitting.” <em>Wikipedia, The Free Encyclopedia,</em> https://en.wikipedia.org/w/index.php?title=Overfitting&amp;oldid=1261562364 (accessed January 20, 2025).</li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>